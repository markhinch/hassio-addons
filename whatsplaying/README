# What's Playing Home Assistant Addon

For running the backend in Raspbian (ie: not as a Home Assistant Add-on), use this command to spin up the container:

`docker build --build-arg BUILD_FROM="python:3" -t whatsplaying_web .`

For running / testing the backend locally, run with:

`python -m http.server`

Please note you'll need a local `data/options.json` file (which is usually generated by the Addon on Home Assistant). This file looks like this:

```
{
	"mqtt_username": "",
	"mqtt_password": "",
	"mqtt_host": "homeassistant.local",
	"mqtt_port": 1884,
	"show_qr": false
}
```
---
For invoking the frontend on a Raspberry Pi kiosk at boot, create a file in the home directory named "kiosk.sh" (also `chmod +x` it) with the following:

```
#!/bin/bash

xset s noblank
xset s off
xset -dpms

unclutter -idle 0.5 -root &

sed -i 's/"exited_cleanly":false/"exited_cleanly":true/' /home/$USER/.config/chromium/Default/Preferences
sed -i 's/"exit_type":"Crashed"/"exit_type":"Normal"/' /home/$USER/.config/chromium/Default/Preferences

/usr/bin/chromium-browser --noerrdialogs --kiosk http://homeassistant.local:777 &
```

Then edit ~/.config/lxsession/LXDE-pi/autostart and add the following:

`@/home/USERNAME/kiosk.sh`
